@using CMS.Commerce
@using DancingGoat.Commerce
@using DancingGoat.Models

@model ProductListItemViewModel

@{
    var isDiscounted = Model.ListPrice > 0 && Model.ListPrice > Model.Price && Model.AppliedPromotion is not null;
}

<article class="product-tile">
    <a href="@Model.Url">
        <h1 class="product-heading">@Model.Name</h1>
        @if (@Model.Tag != null) {
            <div class="product-tag">@Model.Tag</div>
        }

        <figure class="product-tile-image">
            @if (!string.IsNullOrEmpty(Model.ImagePath))
            {
                <img src="@Model.ImagePath" alt="@Model.Name" title="@Model.Name" />
            }
        </figure>

        <div class="product-tile-info">
            @if (isDiscounted)
            {
                <span class="product-tile-discount-tag">
                    -@Model.AppliedPromotion.PromotionDisplayLabel
                </span>
            }
            <span class="product-tile-price @(isDiscounted ? "product-tile--red" : "")">
                <price>@Model.Price</price>
            </span>
            @if (isDiscounted)
            {
                <span class="product-tile-list-price">
                    <price>@Model.ListPrice</price>
                </span>
            }
        </div>
    </a>
</article>